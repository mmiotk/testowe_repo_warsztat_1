on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Wybierz Å›rodowisko docelowe'
        required: true
        type: choice
        options:
          - development
          - staging
          - production
        default: 'staging'

      version:
        description: 'Wersja do wdroÅ¼enia (np. v1.2.3 lub "latest")'
        required: true
        type: string
        default: 'latest'

      run_migrations:
        description: 'Czy uruchomiÄ‡ migracje bazy danych?'
        required: true
        type: boolean
        default: false

      notify_team:
        description: 'PowiadomiÄ‡ zespÃ³Å‚ o wdroÅ¼eniu?'
        required: false
        type: boolean
        default: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: WyÅ›wietl parametry wdroÅ¼enia
        run: |
          echo "ğŸš€ Rozpoczynanie wdroÅ¼enia..."
          echo "Åšrodowisko: ${{ inputs.environment }}"
          echo "Wersja: ${{ inputs.version }}"
          echo "Migracje: ${{ inputs.run_migrations }}"
          echo "Powiadomienia: ${{ inputs.notify_team }}"

      - name: Walidacja Å›rodowiska produkcyjnego
        if: inputs.environment == 'production'
        run: |
          echo "âš ï¸  UWAGA: WdroÅ¼enie na PRODUKCJÄ˜!"
          echo "Upewnij siÄ™, Å¼e wszystkie testy przeszÅ‚y pomyÅ›lnie"

      - name: Uruchom migracje bazy danych
        if: inputs.run_migrations == true
        run: |
          echo "ğŸ—„ï¸  Uruchamianie migracji bazy danych..."
          echo "OSTRZEÅ»ENIE: Ta operacja moÅ¼e byÄ‡ nieodwracalna!"

      - name: Powiadom zespÃ³Å‚
        if: inputs.notify_team == true
        run: |
          echo "ğŸ“¢ WysyÅ‚anie powiadomienia do zespoÅ‚u..."
          echo "WdroÅ¼enie ${{ inputs.version }} na ${{ inputs.environment }} zostaÅ‚o rozpoczÄ™te"
