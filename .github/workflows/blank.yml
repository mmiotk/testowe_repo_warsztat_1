name: Warunkowe wdrożenie
on: [push, pull_request]

jobs:
  tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Uruchom testy
        run: echo "Testy zawsze się uruchamiają"

  production-deploy:
    # Wdróż tylko gdy push jest do głównej gałęzi w konkretnym repozytorium
    if: github.repository == 'moja-firma/aplikacja-produkcyjna' && github.ref == 'refs/heads/main'
    needs: tests
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Wdrożenie na produkcję
        run: |
          echo "Wdrażanie do środowiska produkcyjnego"
          echo "Repozytorium: ${{ github.repository }}"
          echo "Gałąź: ${{ github.ref }}"
