on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Wybierz ≈õrodowisko docelowe'
        required: true
        type: choice
        options:
          - development
          - staging
          - production
        default: 'staging'
      
      version:
        description: 'Wersja do wdro≈ºenia (np. v1.2.3 lub "latest")'
        required: true
        type: string
        default: 'latest'
      
      run_migrations:
        description: 'Czy uruchomiƒá migracje bazy danych?'
        required: true
        type: boolean
        default: false
      
      notify_team:
        description: 'Powiadomiƒá zesp√≥≈Ç o wdro≈ºeniu?'
        required: false
        type: boolean
        default: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Wy≈õwietl parametry wdro≈ºenia
        run: |
          echo "üöÄ Rozpoczynanie wdro≈ºenia..."
          echo "≈örodowisko: ${{ inputs.environment }}"
          echo "Wersja: ${{ inputs.version }}"
          echo "Migracje: ${{ inputs.run_migrations }}"
          echo "Powiadomienia: ${{ inputs.notify_team }}"

      - name: Walidacja ≈õrodowiska produkcyjnego
        if: inputs.environment == 'production'
        run: |
          echo "‚ö†Ô∏è  UWAGA: Wdro≈ºenie na PRODUKCJƒò!"
          echo "Upewnij siƒô, ≈ºe wszystkie testy przesz≈Çy pomy≈õlnie"

      - name: Uruchom migracje bazy danych
        if: inputs.run_migrations == true
        run: |
          echo "üóÑÔ∏è  Uruchamianie migracji bazy danych..."
          echo "OSTRZE≈ªENIE: Ta operacja mo≈ºe byƒá nieodwracalna!"

      - name: Powiadom zesp√≥≈Ç
        if: inputs.notify_team == true
        run: |
          echo "üì¢ Wysy≈Çanie powiadomienia do zespo≈Çu..."
          echo "Wdro≈ºenie ${{ inputs.version }} na ${{ inputs.environment }} zosta≈Ço rozpoczƒôte"