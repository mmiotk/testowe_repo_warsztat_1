name: ZarzÄ…dzanie powÅ‚okami w kontenerach
on: [push]

jobs:
  shell_comparison:
    runs-on: ubuntu-latest
    container: alpine:latest  # Alpine Linux uÅ¼ywa sh jako domyÅ›lnej powÅ‚oki

    # Globalne ustawienie powÅ‚oki dla wszystkich krokÃ³w w tym zadaniu
    defaults:
      run:
        shell: bash

    steps:
      - name: Instalacja bash w Alpine (jeÅ›li potrzeba)
        run: |
          # Alpine domyÅ›lnie ma tylko sh, wiÄ™c instalujemy bash
          apk add --no-cache bash
          echo "âœ… Bash zostaÅ‚ zainstalowany"

      - name: Test funkcji bash (dziÄ™ki globalnej konfiguracji)
        run: |
          # Te funkcje dziaÅ‚ajÄ… tylko w bash, nie w sh
          echo "ğŸš Testowanie zaawansowanych funkcji bash:"
          
          # Tablice (niedostÄ™pne w sh)
          fruits=("apple" "banana" "cherry")
          echo "Owoce: ${fruits[@]}"
          
          # Zaawansowane rozwijanie zmiennych
          filename="report.txt"
          echo "Nazwa bez rozszerzenia: ${filename%.txt}"
          
          # Operatory logiczne bash
          [[ -f "/.dockerenv" ]] && echo "âœ… W kontenerze" || echo "âŒ Poza kontenerem"

      - name: PrzykÅ‚ad z lokalnym przeÅ‚Ä…cznikiem powÅ‚oki
        shell: sh  # Ten konkretny krok uÅ¼ywa sh mimo globalnej konfiguracji bash
        run: |
          # Kod kompatybilny z sh (podstawowa powÅ‚oka POSIX)
          echo "ğŸ”§ Uruchamiam w sh - podstawowa funkcjonalnoÅ›Ä‡:"
          echo "Zmienna HOME: $HOME"
          echo "Lista plikÃ³w:"
          ls -la /
          
          # Unikamy funkcji specyficznych dla bash
          if [ -f "/.dockerenv" ]; then
            echo "âœ… W kontenerze (sprawdzenie kompatybilne z sh)"
          fi
